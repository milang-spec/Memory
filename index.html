<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kinder-Memory (DEâ‡„EN)</title>
<style>
  body {
    font-family: sans-serif;
    margin: 0;
    background: linear-gradient(#ecfeff, #f0fdf4);
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 10px;
  }
  h1 {
    text-align: center;
    color: #065f46;
  }
  #game {
    display: grid;
    gap: 10px;
    justify-content: center;
    margin-top: 10px;
  }
  .card {
    width: 90px;
    height: 90px;
    background: repeating-linear-gradient(45deg,#a7f3d0 0 12px,#99f6e4 12px 24px);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 40px;
    cursor: pointer;
    user-select: none;
    touch-action: manipulation;
  }
  .card.revealed {
    background: #fff;
    flex-direction: column;
    font-size: 28px;
  }
  .card span {
    font-size: 14px;
    color: #374151;
  }
  #status {
    margin-top: 10px;
    font-weight: bold;
  }
</style>
</head>
<body>

<h1>ðŸŽ´ Kinder-Memory (DEâ‡„EN)</h1>
<div>
  Spieler 1: <input id="p1" placeholder="Name 1">
  Spieler 2: <input id="p2" placeholder="Name 2">
  <button onclick="startGame()">Start</button>
</div>
<div id="status"></div>
<div id="game"></div>

<script>
const words = [
  { de: "Apfel", en: "apple", emoji: "ðŸŽ" },
  { de: "Auto", en: "car", emoji: "ðŸš—" },
  { de: "Haus", en: "house", emoji: "ðŸ " },
  { de: "Hund", en: "dog", emoji: "ðŸ¶" },
  { de: "Katze", en: "cat", emoji: "ðŸ±" },
  { de: "Ball", en: "ball", emoji: "âš½" },
  { de: "Schuhe", en: "shoes", emoji: "ðŸ‘Ÿ" },
  { de: "Wasser", en: "water", emoji: "ðŸ’§" }
];

let deck = [];
let revealed = [];
let matched = [];
let currentPlayer = 0;
let scores = [0,0];
let players = ["Spieler 1","Spieler 2"];

function shuffle(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
}

function speakEnglish(text) {
  if ('speechSynthesis' in window) {
    const msg = new SpeechSynthesisUtterance(text);
    msg.lang = "en-US";
    msg.rate = 0.9;
    speechSynthesis.cancel();
    speechSynthesis.speak(msg);
  }
}

function startGame() {
  const p1Name = document.getElementById("p1").value.trim() || "Spieler 1";
  const p2Name = document.getElementById("p2").value.trim() || "Spieler 2";
  players = [p1Name, p2Name];
  scores = [0,0];
  currentPlayer = 0;
  matched = [];
  revealed = [];

  deck = [];
  words.forEach(w => {
    deck.push({...w, id: w.de + "1"});
    deck.push({...w, id: w.de + "2"});
  });
  shuffle(deck);

  renderBoard();
  updateStatus();
}

function renderBoard() {
  const game = document.getElementById("game");
  game.innerHTML = "";
  game.style.gridTemplateColumns = `repeat(4, 90px)`;
  deck.forEach(card => {
    const div = document.createElement("div");
    div.className = "card";
    if (revealed.includes(card.id) || matched.includes(card.id)) {
      div.classList.add("revealed");
      div.innerHTML = `${card.emoji}<span>${card.de} Â· ${card.en}</span>`;
    }
    div.onclick = () => handleClick(card);
    game.appendChild(div);
  });
}

function handleClick(card) {
  if (revealed.includes(card.id) || matched.includes(card.id)) return;
  revealed.push(card.id);
  speakEnglish(card.en);
  renderBoard();

  if (revealed.length === 2) {
    const c1 = deck.find(c => c.id === revealed[0]);
    const c2 = deck.find(c => c.id === revealed[1]);
    if (c1.en === c2.en && c1.id !== c2.id) {
      matched.push(c1.id, c2.id);
      scores[currentPlayer]++;
    } else {
      setTimeout(() => {
        revealed = [];
        currentPlayer = currentPlayer === 0 ? 1 : 0;
        renderBoard();
        updateStatus();
      }, 800);
      return;
    }
    revealed = [];
    updateStatus();
    if (matched.length === deck.length) {
      document.getElementById("status").innerText =
        `Fertig! ${scores[0] === scores[1] ? "Unentschieden" : (scores[0] > scores[1] ? players[0] : players[1]) + " gewinnt!"}`;
    }
  }
}

function updateStatus() {
  document.getElementById("status").innerText =
    `${players[currentPlayer]} ist dran Â· ${players[0]}: ${scores[0]} | ${players[1]}: ${scores[1]}`;
}
</script>

</body>
</html>
